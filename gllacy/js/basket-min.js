'use strict';(function(){const a='basket__link_actual',b={FIRST:1,SECOND:[2,4]},c=document.querySelector('template'),d=document.querySelector('.basket__link'),e=document.querySelector('.basket'),f=[];Object.defineProperty(f,'sum',{get:function(){return this.reduce(function(p,q){return p+parseInt(q.cost,10)},0)}});const g=function(){const p=e.querySelector('.basket__popup');e.removeChild(p),d.classList.remove(a),d.textContent='\u041F\u0443\u0441\u0442\u043E'},h=function(p){for(let q=0;q<f.length;q++)if(f[q].element===p){f.splice(q,1);break}},j=function(p){let r='\u043E\u0432';return p%10===b.FIRST?r='':p%10>=b.SECOND[0]&&p%10<=b.SECOND[1]&&(r='a'),p+' \u0442\u043E\u0432\u0430\u0440'+r},k=function(p){this.url='url('+p.querySelector('.products__image').src+')',this.productName=p.querySelector('.link-border').textContent,this.price=parseInt(p.querySelector('.products__cost').textContent,10)+' \u0440\u0443\u0431.',this.cost=1.5*parseInt(this.price,10)+' \u0440\u0443\u0431.',this.card=p},l=function(){const p=c.content.querySelector('.basket__popup').cloneNode();p.appendChild(c.content.querySelector('.basket__list').cloneNode()),p.appendChild(c.content.querySelector('.basket__amount').cloneNode(!0)),p.appendChild(c.content.querySelector('.basket__submit').cloneNode(!0)),e.appendChild(p),d.classList.add(a)},m=function(p){const q=p.target.closest('.basket__item'),r=p.target.closest('.basket__list'),s=p.target.closest('.basket__popup');r.removeChild(q),h(q),s.querySelector('.basket__sum').textContent=f.sum+' \u0440\u0443\u0431.',d.textContent=j(f.length),f.length||g(),p.target.removeEventListener('click',m)},n=function(p){const q=c.content.querySelector('.basket__item').cloneNode(!0),r=q.querySelector('.basket__image'),s=q.querySelector('.basket__product'),t=q.querySelector('.basket__price'),u=q.querySelector('.basket__cost'),v=q.querySelector('.basket__delete-product'),w=e.querySelector('.basket__list'),x=e.querySelector('.basket__sum');w.appendChild(function(){return r.style.backgroundImage=p.url,s.textContent=p.productName,t.textContent=p.price,u.textContent=p.cost,v.addEventListener('click',m),p.element=q,q}(p)),x.textContent=f.sum+' \u0440\u0443\u0431.',d.textContent=j(f.length)};document.addEventListener('click',function(p){if(p.target.classList.contains('products__button')){p.preventDefault();const q=p.target.closest('.products__item'),r=new k(q),s=f.some(function(t){return t.card===q});e.querySelector('.basket__popup')||l(),s||(f.push(r),n(r))}},!0)})();
