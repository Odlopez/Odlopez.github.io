'use strict';(function(){var a='basket__link_actual',b={FIRST:[1,11],SECOND:[2,4],THIRD:[5,20]},c=document.querySelector('.template'),d=document.querySelector('.basket__link'),e=document.querySelector('.basket'),f=[];Object.defineProperty(f,'sum',{get:function(){return this.reduce(function(q,r){return q+parseInt(r.cost,10)},0)}});var g=function(){var q=e.querySelector('.basket__popup');e.removeChild(q),d.classList.remove(a),d.textContent='\u041F\u0443\u0441\u0442\u043E'},h=function(q){for(var r=0;r<f.length;r++)if(f[r].element===q){f.splice(r,1);break}},j=function(q){var s='\u043E\u0432';return q>=b.THIRD[0]&&q<=b.THIRD[1]?s='\u043E\u0432':q%10>=b.SECOND[0]&&q%10<=b.SECOND[1]?s='a':q%10===b.FIRST[0]&&q!==b.FIRST[1]&&(s=''),q+' \u0442\u043E\u0432\u0430\u0440'+s},k=function(q){this.url='url('+q.querySelector('.products__image').src+')',this.productName=q.querySelector('.link-border').textContent,this.price=parseInt(q.querySelector('.products__cost').textContent,10)+' \u0440\u0443\u0431.',this.cost=1.5*parseInt(this.price,10)+' \u0440\u0443\u0431.',this.card=q},l=function(){var q=c.querySelector('.basket__popup').cloneNode();q.appendChild(c.querySelector('.basket__list').cloneNode()),q.appendChild(c.querySelector('.basket__amount').cloneNode(!0)),q.appendChild(c.querySelector('.basket__submit').cloneNode(!0)),e.appendChild(q),d.classList.add(a)},m=function p(q){var r=q.target.closest('.basket__item'),s=q.target.closest('.basket__list'),t=q.target.closest('.basket__popup');s.removeChild(r),h(r),t.querySelector('.basket__sum').textContent=f.sum+' \u0440\u0443\u0431.',d.textContent=j(f.length),f.length||g(),q.target.removeEventListener('click',p)},n=function(q){var r=c.querySelector('.basket__item').cloneNode(!0),s=r.querySelector('.basket__image'),t=r.querySelector('.basket__product'),u=r.querySelector('.basket__price'),v=r.querySelector('.basket__cost'),w=r.querySelector('.basket__delete-product'),x=e.querySelector('.basket__list'),y=e.querySelector('.basket__sum');x.appendChild(function(){return s.style.backgroundImage=q.url,t.textContent=q.productName,u.textContent=q.price,v.textContent=q.cost,w.addEventListener('click',m),q.element=r,r}(q)),y.textContent=f.sum+' \u0440\u0443\u0431.',d.textContent=j(f.length)};document.addEventListener('click',function(q){if(q.target.classList.contains('products__button')){q.preventDefault();var r=q.target.closest('.products__item'),s=new k(r),t=f.some(function(u){return u.card===r});e.querySelector('.basket__popup')||l(),t||(f.push(s),n(s))}},!0)})();
